<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cart</title>
  <link rel="icon" type="image/x-icon" href="/assets/pokemonix-light-logo.ico">
  <link rel="stylesheet" href="/styles/addtocart-style.css">
  <link rel="stylesheet" href="/styles/homepage-default.css">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
  <script src="https://kit.fontawesome.com/e9625646b7.js" crossorigin="anonymous"></script>
</head>

<body>
  <!--NAVBAR-->
  <div id="nav-bar">
    <input id="nav-toggle" type="checkbox" checked />
    <div id="nav-header">
      <a id="nav-title" href="#" target="_blank">
        <img src="https://i.ibb.co/LMPWvdL/pokemonix-light-logo.png" 
             style="width: 50px; height: 50px; vertical-align: middle; ">
        <span id="nav-logo-title">Pokemonix</span>
      </a>
      <label for="nav-toggle"><span id="nav-toggle-burger"></span></label>
    </div>
    <div id="nav-content">
      <div class="nav-button" onclick="navigateTo('homepage.html')">
        <i class="fas fa-house-chimney"></i><span>Home</span>
      </div>

      <div class="nav-button" onclick="navigateTo('cart.html')">
        <i class="fas fa-cart-shopping"></i>
        <span>Cart</span>     </div>

      <div class="nav-button" onclick="navigateTo('transaction.html')">
        <i class="fas fa-exchange"></i><span>Transactions</span>
      </div>

      <div class="nav-button" onclick="navigateTo('https://store.pokemongolive.com/offer-redemption')">
        <i class="fa-solid fas fa-money-bill"></i><span>Code Redemption</span>
      </div>

      <div class="nav-button" onclick="navigateTo('profile-page.html')">
        <i class="fas fa-user"></i><span>Profile</span>
      </div>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <div class="main-content">
    <!--CART DETAILS-->
    <div class="cart">
      <div class="order-text"><i class="bi bi-cart"></i>
        <p>ORDER DETAILS</p>
      </div>
      <div class="cart-header">
        <span>PRODUCT</span>
        <span>PRICE</span>
        <span>QUANTITY</span>
        <span>TOTAL</span>
        <span></span>
      </div>

      <div class="cart-items"></div>

      <div class="row-container">
        <div class="promo-code">
          <input type="text" placeholder="Promo Code">
          <button>APPLY CODE</button>
        </div>

        <div class="cart-summary">
          <h3>ORDER SUMMARY</h3>
          <div class="cart-total">
            <p>Subtotal <span class="subtotal">₱0</span></p>
            <p>Grand Total <span class="grand-total">₱0</span></p>
            <button class="checkout-btn" id="proceed-to-payment">CHECKOUT</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!--PAYMENT METHOD-->
  <section class="payment-section">
    <div class="payment-container">
      <div class="payment-right">
        <form action="" class="payment-form">
          <h1 class="payment-title">Payment Details</h1>
          <div class="payment-method">
            <input type="radio" name="payment-method" id="method-1" checked>
            <label for="method-1" class="payment-method-item">
              <img src="/assets/cart-images/unionpay.png" alt="">
            </label>
            <input type="radio" name="payment-method" id="method-2">
            <label for="method-2" class="payment-method-item">
              <img src="/assets/cart-images/mastercard.png" alt="">
            </label>
            <input type="radio" name="payment-method" id="method-3">
            <label for="method-3" class="payment-method-item">
              <img src="/assets/cart-images/paypal.png" alt="">
            </label>
            <input type="radio" name="payment-method" id="method-4">
            <label for="method-4" class="payment-method-item">
              <img src="/assets/cart-images/Gcash.png" alt="">
            </label>
          </div>
          <div class="payment-form-group">
            <input type="email" placeholder=" " class="payment-form-control" id="email">
            <label for="email" class="payment-form-label payment-form-label-required">Email Address</label>
          </div>
          <div class="payment-form-group">
            <input type="text" placeholder=" " class="payment-form-control" id="card-number">
            <label for="card-number" class="payment-form-label payment-form-label-required">Card Number</label>
          </div>
          <div class="payment-form-group-flex">
            <div class="payment-form-group">
              <input type="date" placeholder=" " class="payment-form-control" id="expiry-date">
              <label for="expiry-date" class="payment-form-label payment-form-label-required">Expiry Date</label>
            </div>
            <div class="payment-form-group">
              <input type="text" placeholder=" " class="payment-form-control" id="cvv">
              <label for="cvv" class="payment-form-label payment-form-label-required">CVV</label>
            </div>
          </div>
          <div class="button-container">
            <button type="button" id="close-payment" class="payment-form-close-button">Cancel</button>
            <button type="submit" class="payment-form-submit-button"><i class="ri-wallet-line"></i> Pay</button>
          </div>
        </form>
      </div>
    </div>
    </div>
  </section>

  <script src="/javascript/default.js"></script>
  <script src="/javascript/checkout.js"></script>

  <script>
    const mainContent = document.querySelector(".main-content");
    const paymentSection = document.querySelector(".payment-section");
    const proceedToPaymentBtn = document.getElementById("proceed-to-payment");
    const closePaymentBtn = document.getElementById("close-payment");

    function showPayment() {
      paymentSection.style.display = "block";
      mainContent.classList.add("dimmed");
    }

    function hidePayment() {
      paymentSection.style.display = "none";
      mainContent.classList.remove("dimmed");
    }

    proceedToPaymentBtn.addEventListener("click", showPayment);
    closePaymentBtn.addEventListener("click", hidePayment);
  </script>

<script src="/javascript/cart-function.js"></script>
<script>
  // Function to render cart items
  function renderCartItems() {
    const cartItemsContainer = document.querySelector('.cart-items');
    const subtotalElement = document.querySelector('.subtotal');
    const grandTotalElement = document.querySelector('.grand-total');
    
    // Clear existing content
    cartItemsContainer.innerHTML = '';
    
    // Get cart items
    const items = cart.load();
    
    if (items.length === 0) {
      cartItemsContainer.innerHTML = '<div class="empty-cart">Your cart is empty</div>';
      subtotalElement.textContent = '$0.00';
      grandTotalElement.textContent = '$0.00';
      return;
    }
    
    // Render each item
    items.forEach(item => {
      const itemTotal = (parseFloat(item.price.replace('$', '')) * item.quantity).toFixed(2);
      
      const itemElement = document.createElement('div');
      itemElement.className = 'cart-item';
      itemElement.innerHTML = `
        <div class="cart-product">
          <img src="${item.image}" alt="${item.name}">
          <span>${item.name}</span>
        </div>
        <div class="cart-price">${item.price}</div>
        <div class="cart-quantity">
          <button class="quantity-btn minus" data-id="${item.id}">-</button>
          <span>${item.quantity}</span>
          <button class="quantity-btn plus" data-id="${item.id}">+</button>
        </div>
        <div class="cart-total">$${itemTotal}</div>
        <div class="cart-remove">
          <button class="remove-btn" data-id="${item.id}"><i class="bi bi-trash"></i></button>
        </div>
      `;
      
      cartItemsContainer.appendChild(itemElement);
    });
    
    // Update totals
    const total = cart.calculateTotal();
    subtotalElement.textContent = `$${total}`;
    grandTotalElement.textContent = `$${total}`;
    
    // Add event listeners to quantity and remove buttons
    setupCartEvents();
  }
  
  // Setup event listeners for cart interactions
  function setupCartEvents() {
    // Quantity adjustment
    document.querySelectorAll('.quantity-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const id = this.getAttribute('data-id');
        const item = cart.items.find(item => item.id === id);
        
        if (this.classList.contains('plus')) {
          cart.updateQuantity(id, item.quantity + 1);
        } else if (this.classList.contains('minus')) {
          cart.updateQuantity(id, item.quantity - 1);
        }
        
        renderCartItems();
      });
    });
    
    // Remove item
    document.querySelectorAll('.remove-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const id = this.getAttribute('data-id');
        cart.removeItem(id);
        renderCartItems();
      });
    });
  }
  
  // Initial render
  document.addEventListener('DOMContentLoaded', function() {
    renderCartItems();
    
    // Handle checkout button
    document.getElementById('proceed-to-payment').addEventListener('click', function() {
      if (cart.items.length === 0) {
        alert('Your cart is empty!');
        return false;
      }
    });
  });
</script>
</body>

</html>